---
title: "Play-to-Airdrop Campaign System"
slug: "play-to-airdrop"
summary: "Gamified user acquisition and retention platform"
date: "2024-06-15"
updated: "2025-10-16"
tags: ["gamification", "product", "web3", "growth", "quests"]
tech: ["TypeScript", "Next.js", "PostgreSQL", "Redis", "Chainlink"]
cover: ""
status: "production"
featured: false
---

## Overview

Designed and led the development of a gamified campaign system that increased protocol engagement through quest-based rewards and social mechanics.

This platform transformed user acquisition from passive airdrops to active engagement, resulting in 50K+ participants and 3x TVL growth.

## Key Features

### Dynamic Quest Generation
- **Social quests**: Twitter follows, retweets, Discord joins
- **On-chain quests**: Swaps, liquidity provision, governance votes
- **Skill quests**: Trading challenges, prediction markets
- **Community quests**: Referrals, content creation
- **Time-limited events**: Weekly challenges, season rewards

### Social Referral Tracking
- Unique referral codes per user
- Multi-tier commission structure
- Viral coefficient optimization
- Referral leaderboards
- Bonus rewards for quality referrals

### Anti-Sybil Protection
- **Wallet clustering**: Detect related addresses
- **Behavioral analysis**: Flag bot-like patterns
- **Social verification**: Twitter age, followers
- **On-chain history**: Minimum activity requirements
- **Machine learning**: Anomaly detection models

### Real-Time Leaderboards
- Global rankings by points
- Category-specific boards (traders, liquidity providers)
- Guild/team competitions
- Historical performance tracking
- Milestone badges and achievements

### Automated Reward Distribution
- Chainlink Keepers for reliable execution
- Merkle tree proofs for gas efficiency
- Vesting schedules for large rewards
- Claim deadlines and forfeitures
- Multi-token reward options

## Product Architecture

<Terminal cmd="campaign system architecture">
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│  Next.js UI  │─────▶│  Campaign    │─────▶│  Reward      │
│  (Quests)    │      │  Engine      │      │  Distribution│
└──────────────┘      └──────────────┘      └──────────────┘
       │                     │                      │
       ▼                     ▼                      ▼
  ┌──────────┐          ┌──────────┐          ┌──────────┐
  │PostgreSQL│          │  Redis   │          │Chainlink │
  │ Tracking │          │  Cache   │          │ Keepers  │
  └──────────┘          └──────────┘          └──────────┘
</Terminal>

## Campaign Metrics

<Admonition type="note">
Results from ConsumerFi play-to-airdrop seasons 1-3.
</Admonition>

- **50K+ participants** across 3 seasons
- **3x increase in protocol TVL** during campaigns
- **85% user retention** after 30 days (vs 20% baseline)
- **25K+ social media engagements** per season
- **$2M+ in rewards distributed** to community

## Quest Design Framework

### Quest Categories & Point Values

**Social Engagement (Low Effort, Low Reward)**
- Follow Twitter: 10 points
- Retweet announcement: 20 points
- Join Discord: 30 points
- Engage with 5 tweets: 50 points

**On-Chain Activity (Medium Effort, Medium Reward)**
- Make first swap: 100 points
- Provide $100+ liquidity: 500 points
- Vote on governance: 200 points
- Hold position 7 days: 1000 points

**Advanced Challenges (High Effort, High Reward)**
- Achieve $10K+ volume: 5000 points
- Refer 10+ active users: 10000 points
- Win trading competition: 50000 points
- Create viral content: 20000 points (manual review)

### Gamification Mechanics

**Progression Systems**
- Level 1-10 with unlockable quests
- Experience points (XP) for all actions
- Prestige system for long-term players
- Season pass with premium rewards

**Social Proof**
- Public profiles with stats
- Shareable achievement cards
- Leaderboard positions
- Exclusive roles in Discord

**FOMO Triggers**
- Limited-time quests (24-48 hours)
- First N participants bonus
- Early bird multipliers
- Seasonal exclusives

## Anti-Sybil System

### Detection Mechanisms

```typescript
interface SybilScore {
  walletClustering: number;    // 0-100 (higher = more suspicious)
  behavioralAnalysis: number;  // Bot-like patterns
  socialVerification: number;  // Twitter credibility
  onChainHistory: number;      // Activity diversity
  referralQuality: number;     // Referred users legitimacy
}

function calculateSybilRisk(user: User): number {
  const scores = analyzeSybilIndicators(user);

  // Weighted average
  const risk =
    scores.walletClustering * 0.3 +
    scores.behavioralAnalysis * 0.3 +
    (100 - scores.socialVerification) * 0.2 +
    (100 - scores.onChainHistory) * 0.1 +
    (100 - scores.referralQuality) * 0.1;

  return risk; // 0-100 (higher = more likely Sybil)
}

// Auto-flag users with risk > 70
// Manual review for 50-70
// Auto-approve < 50
```

### Graph Analysis

- Identify wallet clusters (same owner)
- Detect circular referral rings
- Flag bulk account creation
- Monitor IP address patterns
- Cross-reference KYC data (optional)

## Reward Distribution Mechanics

### Merkle Tree Claims

```solidity
// RewardDistributor.sol
contract RewardDistributor {
    bytes32 public merkleRoot;
    mapping(address => bool) public claimed;

    function claim(
        uint256 amount,
        bytes32[] calldata proof
    ) external {
        require(!claimed[msg.sender], "Already claimed");

        // Verify Merkle proof
        bytes32 leaf = keccak256(abi.encodePacked(msg.sender, amount));
        require(MerkleProof.verify(proof, merkleRoot, leaf), "Invalid proof");

        claimed[msg.sender] = true;
        token.transfer(msg.sender, amount);
    }
}
```

### Vesting Schedules

- **Immediate unlock**: 25% of rewards
- **1-month cliff**: 25% after 30 days
- **3-month linear**: 50% over 90 days
- **Bonus unlock**: Early if user stays active

## Campaign Results

### Season 1: "First Movers"
- **Duration**: 30 days
- **Participants**: 5,000
- **Reward Pool**: $100K
- **TVL Impact**: +$2M
- **Key Learning**: Social quests drove 80% of signups

### Season 2: "Power Users"
- **Duration**: 60 days
- **Participants**: 15,000
- **Reward Pool**: $500K
- **TVL Impact**: +$8M
- **Key Learning**: On-chain quests drove retention

### Season 3: "Community Builders"
- **Duration**: 90 days
- **Participants**: 30,000
- **Reward Pool**: $1.4M
- **TVL Impact**: +$15M
- **Key Learning**: Referral system created viral growth

## User Journey

```
Discover → Connect Wallet → Complete Profile → Start Quests
  ↓
View Quest Board → Choose Quest → Complete Action → Earn Points
  ↓
Climb Leaderboard → Unlock Achievements → Refer Friends → Win Prizes
  ↓
Claim Rewards → Vest Tokens → Stay Active → Repeat Next Season
```

## Technical Implementation

### Quest Verification

```typescript
// Quest verification system
async function verifyQuest(
  userId: string,
  questId: string
): Promise<boolean> {
  const quest = await getQuest(questId);

  switch (quest.type) {
    case "twitter_follow":
      return verifyTwitterFollow(userId, quest.targetAccount);

    case "on_chain_swap":
      return verifySwap(userId, quest.minAmount);

    case "liquidity_provision":
      return verifyLiquidity(userId, quest.poolAddress);

    case "governance_vote":
      return verifyVote(userId, quest.proposalId);

    default:
      throw new Error(`Unknown quest type: ${quest.type}`);
  }
}
```

### Real-Time Leaderboard

```typescript
// Redis-powered leaderboard
async function updateLeaderboard(
  userId: string,
  points: number
): Promise<void> {
  await redis.zadd("global_leaderboard", points, userId);

  // Category-specific boards
  const userCategory = await getUserCategory(userId);
  await redis.zadd(`${userCategory}_leaderboard`, points, userId);

  // Guild boards
  const userGuild = await getUserGuild(userId);
  if (userGuild) {
    await redis.zadd(`guild_${userGuild}_leaderboard`, points, userId);
  }
}

async function getTopN(n: number): Promise<LeaderboardEntry[]> {
  const results = await redis.zrevrange(
    "global_leaderboard",
    0,
    n - 1,
    "WITHSCORES"
  );

  return parseLeaderboardResults(results);
}
```

## Business Impact

### User Acquisition
- **Cost per acquisition**: $4 (vs $50 industry avg)
- **Viral coefficient**: 1.8 (each user brings 1.8 more)
- **Organic reach**: 2M+ impressions per season
- **Press coverage**: Featured in 15+ crypto publications

### Retention & Engagement
- **30-day retention**: 85% (vs 20% baseline)
- **Daily active users**: +300% during campaigns
- **Session time**: +150% average
- **Community growth**: Discord +500%, Twitter +800%

### Financial Outcomes
- **TVL growth**: +$25M total across seasons
- **Trading volume**: +$100M during campaigns
- **Revenue**: $500K+ in protocol fees
- **ROI**: 5x on reward budget

## Challenges & Solutions

**Challenge**: Sybil attacks costing 40% of rewards
**Solution**: ML-based detection + social verification

**Challenge**: Quest fatigue after week 1
**Solution**: Dynamic quest rotation + surprise drops

**Challenge**: Whale dominance in leaderboards
**Solution**: Category boards + participation rewards

**Challenge**: Gas costs for reward claims
**Solution**: Merkle proofs + Layer 2 deployment

## Future Enhancements

- [ ] NFT-based achievement system
- [ ] Cross-protocol quest partnerships
- [ ] Mobile app with push notifications
- [ ] AI-generated personalized quests
- [ ] Prediction market for leaderboards

## Tech Stack

- **Frontend**: Next.js 14, TypeScript, Tailwind CSS
- **Backend**: Node.js, PostgreSQL, Prisma ORM
- **Caching**: Redis for leaderboards
- **Blockchain**: Ethers.js, Hardhat, OpenZeppelin
- **Automation**: Chainlink Keepers
- **Analytics**: Mixpanel, Dune Analytics

*Proprietary campaign platform developed for ConsumerFi.*
